# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
  title: BaseService API
  description: |-
    @securityDefinitions.apikey BearerAuth
     @in header
     @name Authorization
  version: 0.0.1
paths:
  /v1/channel:
    put:
      tags:
        - BaseService
      description: 更新足迹频道
      operationId: BaseService_ChannelUpdate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelUpdateReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelUpdateRes'
    post:
      tags:
        - BaseService
      description: 创建足迹频道
      operationId: BaseService_ChannelCreate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelCreateReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelCreateRes'
    delete:
      tags:
        - BaseService
      description: 删除足迹频道
      operationId: BaseService_ChannelDelete
      parameters:
        - name: chan_id
          in: query
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelDeleteRes'
  /v1/channel/base_query_by_bound:
    post:
      tags:
        - BaseService
      description: 按照范围按照用户互动记录
      operationId: BaseService_ChannelBaseQueryByBound
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelBaseQueryByBoundReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelBaseQueryByBoundRes'
  /v1/channel/base_query_by_user:
    post:
      tags:
        - BaseService
      description: 按照用户互动记录查询频道列表
      operationId: BaseService_ChannelBaseQueryByUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelBaseQueryByUserReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelBaseQueryByUserRes'
  /v1/channel/full_query_by_id:
    get:
      tags:
        - BaseService
      description: 按照id查询足迹频道动态信息
      operationId: BaseService_ChannelFullQueryById
      parameters:
        - name: chan_id
          in: query
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelFullQueryByIdRes'
  /v1/channel/inx:
    post:
      tags:
        - BaseService
      description: 足迹频道互动
      operationId: BaseService_ChannelInx
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelInxReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelInxRes'
  /v1/channel/post:
    put:
      tags:
        - BaseService
      description: 频道帖子更新
      operationId: BaseService_ChannelPostUpdate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelPostUpdateReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelPostUpdateRes'
    post:
      tags:
        - BaseService
      description: 频道帖子创建
      operationId: BaseService_ChannelPostCreate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelPostCreateReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelPostCreateRes'
    delete:
      tags:
        - BaseService
      description: 频道帖子删除
      operationId: BaseService_ChannelPostDelete
      parameters:
        - name: chan_id
          in: query
          schema:
            type: string
        - name: post_id
          in: query
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelPostDeleteRes'
  /v1/channel/post/inx:
    post:
      tags:
        - BaseService
      description: 频道帖子互动
      operationId: BaseService_ChannelPostInx
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelPostInxReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelPostInxRes'
  /v1/channel/post/load:
    post:
      tags:
        - BaseService
      description: 频道帖子加载
      operationId: BaseService_ChannelPostLoad
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChannelPostLoadReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelPostLoadRes'
  /v1/channel/type:
    get:
      tags:
        - BaseService
      description: 列表查询足迹频道类型
      operationId: BaseService_ChannelTypeList
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelTypeListRes'
  /v1/location/search:
    get:
      tags:
        - BaseService
      description: 通用地点搜索
      operationId: BaseService_LocationCommonSearch
      parameters:
        - name: input
          in: query
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationCommonSearchRes'
  /v1/media/put_url/batch:
    get:
      tags:
        - BaseService
      description: 批量获取对象上传预签名URL
      operationId: BaseService_MediaPutURLBatchGet
      parameters:
        - name: media_type
          in: query
          schema:
            type: integer
            format: enum
        - name: count
          in: query
          schema:
            type: integer
            format: int32
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MediaPutURLBatchGetRes'
  /v1/notify/query:
    post:
      tags:
        - BaseService
      description: 查询系统通知接口
      operationId: BaseService_SystemNotifyQuery
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SystemNotifyQueryReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemNotifyQueryRes'
  /v1/user/fast_reg/wx:
    post:
      tags:
        - BaseService
      description: 微信小程序快速登录注册接口定义
      operationId: BaseService_FastRegisterWeChat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FastRegisterWeChatReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FastRegisterWeChatRes'
  /v1/user/login/wx:
    post:
      tags:
        - BaseService
      description: |-
        微信小程序登录接口
         @security BearerAuth
      operationId: BaseService_LoginWeChat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginWeChatReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginWeChatRes'
  /v1/user/pet:
    get:
      tags:
        - BaseService
      description: 宠物资料查询
      operationId: BaseService_UserPeGet
      parameters:
        - name: user_id
          in: query
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserPeGetRes'
    put:
      tags:
        - BaseService
      description: 宠物资料更新
      operationId: BaseService_UserPetUpdate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserPetUpdateReq'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserPetUpdateRes'
components:
  schemas:
    BoundCoord:
      type: object
      properties:
        sw:
          $ref: '#/components/schemas/PointCoord'
        ne:
          $ref: '#/components/schemas/PointCoord'
    ChannelBaseQueryByBoundReq:
      type: object
      properties:
        type_ids:
          type: array
          items:
            type: integer
            format: int32
          description: 足迹类型id列表
        bound:
          allOf:
            - $ref: '#/components/schemas/BoundCoord'
          description: 坐标范围
    ChannelBaseQueryByBoundRes:
      type: object
      properties:
        channels:
          type: array
          items:
            $ref: '#/components/schemas/ChannelInfo'
    ChannelBaseQueryByUserReq:
      type: object
      properties:
        user_id:
          type: string
        ixn_state:
          type: integer
          description: 互动状态类型, 二选一
          format: enum
        ixn_event:
          type: integer
          description: 互动时间类型, 二选一
          format: enum
    ChannelBaseQueryByUserRes:
      type: object
      properties:
        channels:
          type: array
          items:
            $ref: '#/components/schemas/ChannelInfo'
    ChannelCreateReq:
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/ChannelInfo'
        post_init:
          allOf:
            - $ref: '#/components/schemas/PostInfo'
          description: 创建时候可以携带第一条帖子
      description: 足迹创建
    ChannelCreateRes:
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/ChannelInfo'
    ChannelDeleteRes:
      type: object
      properties: {}
    ChannelFullQueryByIdRes:
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/ChannelInfo'
    ChannelInfo:
      type: object
      properties:
        id:
          type: string
          description: 足迹频道 ID
        type_id:
          type: integer
          description: 足迹频道类型, 不可更新
          format: uint32
        uid:
          type: string
          description: 足迹作者, 不可更新
        title:
          type: string
          description: 足迹名称, 可更新
        avatar:
          allOf:
            - $ref: '#/components/schemas/MediaInfo'
          description: 头像
        intro:
          type: string
          description: 简介, 可更新
        location:
          $ref: '#/components/schemas/LocationInfo'
        stats:
          allOf:
            - $ref: '#/components/schemas/ChannelStats'
          description: 动态状态信息，只读
        created_at:
          type: string
        updated_at:
          type: string
      description: 频道信息
    ChannelInxReq:
      type: object
      properties:
        chan_id:
          type: string
        inx_state:
          type: integer
          description: 互动状态
          format: enum
        inx_state_undo:
          type: integer
          description: 是否撤销状态
          format: enum
        inx_event:
          type: integer
          description: 互动事件
          format: enum
        pet_inx_event:
          type: integer
          description: 宠物互动事件
          format: enum
    ChannelInxRes:
      type: object
      properties: {}
    ChannelPostCreateReq:
      type: object
      properties:
        post:
          $ref: '#/components/schemas/PostInfo'
    ChannelPostCreateRes:
      type: object
      properties:
        post:
          $ref: '#/components/schemas/PostInfo'
    ChannelPostDeleteRes:
      type: object
      properties: {}
    ChannelPostInxReq:
      type: object
      properties:
        post_id:
          type: string
        inx_state:
          type: integer
          description: 互动状态
          format: enum
        inx_state_undo:
          type: integer
          description: 是否撤销状态
          format: enum
        ixn_event:
          type: integer
          description: 互动事件
          format: enum
    ChannelPostInxRes:
      type: object
      properties: {}
    ChannelPostLoadReq:
      type: object
      properties:
        chan_id:
          type: string
        last_post_id:
          type: string
          description: 从传空加载最新100条
    ChannelPostLoadRes:
      type: object
      properties:
        posts:
          type: array
          items:
            $ref: '#/components/schemas/PostInfo'
    ChannelPostUpdateReq:
      type: object
      properties:
        post:
          $ref: '#/components/schemas/PostInfo'
    ChannelPostUpdateRes:
      type: object
      properties:
        post:
          $ref: '#/components/schemas/PostInfo'
    ChannelStats:
      type: object
      properties:
        stars_cnt:
          type: integer
          description: 收藏数
          format: int32
        last_star_at:
          type: string
        posts_cnt:
          type: integer
          description: 帖子数量
          format: int32
        last_post_at:
          type: string
        pee_cnt:
          type: integer
          description: 宠物到访次数
          format: int32
        last_pee_at:
          type: string
        views_cnt:
          type: integer
          description: 查看数
          format: int32
        updated_at:
          type: string
      description: 频道状态, 只读
    ChannelTypeInfo:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        coverage_radius:
          type: integer
          format: int32
        theme_color:
          type: string
        created_at:
          type: string
        updated_at:
          type: string
      description: 足迹频道类型
    ChannelTypeListRes:
      type: object
      properties:
        channel_types:
          type: array
          items:
            $ref: '#/components/schemas/ChannelTypeInfo'
    ChannelUpdateReq:
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/ChannelInfo'
      description: 足迹更新
    ChannelUpdateRes:
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/ChannelInfo'
    FastRegisterWeChatReq:
      type: object
      properties:
        reg_data:
          $ref: '#/components/schemas/UserFastRegisterData'
        wx_code:
          type: string
      description: 快速注册请求
    FastRegisterWeChatRes:
      type: object
      properties:
        token:
          type: string
        user:
          $ref: '#/components/schemas/UserInfo'
    LocationCommonSearchRes:
      type: object
      properties: {}
    LocationInfo:
      type: object
      properties:
        lng_lat:
          allOf:
            - $ref: '#/components/schemas/PointCoord'
          description: 足迹位置, 不可更新
        address:
          type: string
          description: POI 地址, 不可更新
    LoginWeChatReq:
      type: object
      properties:
        wx_code:
          type: string
      description: 登录请求
    LoginWeChatRes:
      type: object
      properties:
        token:
          type: string
        user:
          $ref: '#/components/schemas/UserInfo'
    MediaInfo:
      type: object
      properties:
        uuid:
          type: string
          description: ID, 可写入
        type:
          type: integer
          description: 类型
          format: enum
        get_url:
          type: string
          description: 读取URL
        put_url:
          type: string
          description: 写入URL
    MediaPutURLBatchGetRes:
      type: object
      properties:
        media:
          type: array
          items:
            $ref: '#/components/schemas/MediaInfo'
    NotifyInfo:
      type: object
      properties:
        id:
          type: string
          description: 通知id
        content:
          type: string
          description: 正文内容
        created_at:
          type: string
        updated_at:
          type: string
      description: 系统通知
    PetInfo:
      type: object
      properties:
        id:
          type: string
        uid:
          type: string
        status:
          type: integer
          format: int32
        specie:
          type: string
        name:
          type: string
        intro:
          type: string
        gender:
          type: integer
          format: uint32
        birth_date:
          type: string
        avatar:
          $ref: '#/components/schemas/MediaInfo'
        size:
          type: string
        breed:
          type: string
        weight:
          type: integer
          format: int32
        created_at:
          type: string
        updated_at:
          type: string
    PointCoord:
      type: object
      properties:
        lat:
          type: number
          format: float
        lng:
          type: number
          format: float
    PostInfo:
      type: object
      properties:
        id:
          type: string
          description: 评论id
        uid:
          type: string
          description: 足迹作者, 不可更新
        root_id:
          type: string
          description: 根id, 频道id
        parent_id:
          type: string
          description: 上级帖子id
        content:
          type: string
          description: 正文内容
        media_ids:
          type: array
          items:
            type: string
          description: 媒体id
        stats:
          allOf:
            - $ref: '#/components/schemas/PostStats'
          description: 动态状态信息，只读
        created_at:
          type: string
        updated_at:
          type: string
      description: 频道帖子或者评论
    PostReactionInfo:
      type: object
      properties:
        id:
          type: string
          description: 反应类型
        type:
          type: integer
          description: 反应类型
          format: enum
        count:
          type: integer
          description: 反应数量
          format: int32
        signs:
          type: array
          items:
            $ref: '#/components/schemas/PostReactionSignInfo'
          description: 反应用户信息列表.
        updated_at:
          type: string
    PostReactionSignInfo:
      type: object
      properties:
        user_id:
          type: string
        user_name:
          type: string
    PostStats:
      type: object
      properties:
        stars_cnt:
          type: integer
          description: 收藏数
          format: int32
        last_star_at:
          type: string
        replies_cnt:
          type: integer
          description: 回复数量
          format: int32
        last_reply_at:
          type: string
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/PostReactionInfo'
        updated_at:
          type: string
      description: 频道状态, 只读
    SystemNotifyQueryReq:
      type: object
      properties:
        last_notify_id:
          type: string
    SystemNotifyQueryRes:
      type: object
      properties:
        notifies:
          type: array
          items:
            $ref: '#/components/schemas/NotifyInfo'
    UserFastRegisterData:
      type: object
      properties:
        pet_name:
          type: string
          description: 名字
        pet_avatar_data:
          type: string
          description: 宠物头像 base64 data
        pet_title:
          type: string
          description: 宠物和人的关系
      description: 宠物快速注册信息
    UserInfo:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        user_pets:
          type: array
          items:
            $ref: '#/components/schemas/UserPetInfo'
    UserPeGetRes:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/UserInfo'
    UserPetInfo:
      type: object
      properties:
        pet:
          $ref: '#/components/schemas/PetInfo'
        pet_title:
          type: string
        pet_status:
          type: integer
          format: int32
    UserPetUpdateReq:
      type: object
      properties:
        user_pet:
          $ref: '#/components/schemas/UserPetInfo'
    UserPetUpdateRes:
      type: object
      properties:
        user_pet:
          $ref: '#/components/schemas/UserPetInfo'
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
tags:
  - name: BaseService
security:
  - bearerAuth: []
